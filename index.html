<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Расклад Таро</title>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <style>
    /* Общие стили */
body {
    background: url(https://rawebmaster.github.io/webapptest.github.io/stol-gadalki.webp);
    background-size: cover;
    font-family: sans-serif;
    margin: 0;
    padding: 0;
}

header, main, footer {
    <!--display: flex;-->
    flex-direction: column;
    align-items: center;
}

h1, h2 {
    color: white;
    text-align: center;
}

img {
    max-width: 100%;
    height: auto;
}

.main_body {
    text-align: center;
    margin: 0 25%;
}

.card {
  width: 33.3%;
  height: 120px;
  border: none;
  background-image: url('taro-card-back-10.png');
  background-size: cover;
  display: block;
  margin: 5px;
}

.inner_main_body {
    position: relative;
    left: 50%;
    transform: translate(-50%, 0);
}

.buttons_div{
    display:flex;
}

.backcard {
width:33.3%;
}


/* Адаптивные стили */
@media (max-width: 768px) {
    header, main, footer {
        flex-direction: row;
    }
}
    </style>
</head>
<body>
    <div class = "main_body">
        <div class="inner_main_body">
    <header>
        <h2>Выберите 3 карты</h2>
    </header>

    <main>
        <section class="hero">

        </section>
        <div class = "buttons_div">
        <img src="https://rawebmaster.github.io/webapptest.github.io/taro-card-back-10.png" id="card1" class="backcard">
        <img src="https://rawebmaster.github.io/webapptest.github.io/taro-card-back-10.png" id="card2" class="backcard">
        <img src="https://rawebmaster.github.io/webapptest.github.io/taro-card-back-10.png" id="card3" class="backcard">
        </div>

        <div class = "buttons_div" style="margin: 5px 0">
       <img src="https://rawebmaster.github.io/webapptest.github.io/taro-card-back-10.png" id="card4" class="backcard">
        <img src="https://rawebmaster.github.io/webapptest.github.io/taro-card-back-10.png" id="card5" class="backcard">
        <img src="https://rawebmaster.github.io/webapptest.github.io/taro-card-back-10.png" id="card6" class="backcard">
        </div>
        
        <script>
            let tg = window.Telegram.WebApp;
            let usedCardOne = '';
	    let usedCard = '';
            let url="";

            function sleep(milliseconds) {
              const date = Date.now();
              let currentDate = null;
              do {currentDate = Date.now();
                 } while (currentDate - date < milliseconds);
                }

            function getRandomArbitrary(max) {
	    return Math.floor(Math.random() * max);	    
            }

	    	

function getRandomCard(numero) {
    switch(numero){
	case 1:
	url="/taro/starcan/bashnya.jpg";
	usedCard = "bashnya";	
	break;
	case 2:
	url="/taro/starcan/diyavol.jpg";
	usedCard = "diyavol";	
	break;
	case 3:
	url="/taro/starcan/imperator.jpg";
	usedCard = "imperator";	
	break;
	case 4:
	url="/taro/starcan/imperatrica.jpg";
	usedCard = "imperatrica";	
	break;
	case 5:
	url="/taro/starcan/kolesnica.jpg";
	usedCard = "kolesnica";	
	break;
	case 6:
	url="/taro/starcan/koleso-fortuny.jpg";
	usedCard = "koleso-fortuny";	
	break;
	case 7:
	url="/taro/starcan/luna.jpg";
	usedCard = "luna";	
	break;
	case 8:
	url="/taro/starcan/mag.jpg";
	usedCard = "mag";	
	break;
	case 9:
	url="/taro/starcan/mir.jpg";
	usedCard = "mir";	
	break;
	case 10:
	url="/taro/starcan/poveshennyi.jpg";
	usedCard = "poveshennyi";	
	break;
	case 11:
	url="/taro/starcan/shut.jpg";
	usedCard = "shut";	
	break;
	case 12:
	url="/taro/starcan/sila.jpg";
	usedCard = "sila";	
	break;
	case 13:
	url="/taro/starcan/smert.jpg";
	usedCard = "smert";	
	break;
	case 14:
	url="/taro/starcan/solnce.jpg";
	usedCard = "solnce";	
	break;
	case 15:
	url="/taro/starcan/spravedlivost.jpg";
	usedCard = "spravedlivost";	
	break;
	case 16:
	url="/taro/starcan/sud.jpg";
	usedCard = "sud";	
	break;
	case 17:
	url="/taro/starcan/umerennost.jpg";
	usedCard = "umerennost";	
	break;
	case 18:
	url="/taro/starcan/vlublennye.jpg";
	usedCard = "vlublennye";	
	break;
	case 19:
	url="/taro/starcan/zhrec.jpg";
	usedCard = "verh-zhrec";	
	break;
	case 20:
	url="/taro/starcan/zhrica.jpg";
	usedCard = "verh-zhrica";	
	break;
	case 21:
	url="/taro/starcan/zvezda.jpg";
	usedCard = "zvezda";	
	break;
	case 22:
	url="/taro/kubki/chetverka-kubkov.jpg";
	usedCard = "chetverka-kubkov";	
	break;
	case 23:
	url="/taro/kubki/desyatka-kubkov.jpg";
	usedCard = "desyatka-kubkov";	
	break;
	case 24:
	url="/taro/kubki/devyatka-kubkov.jpg";
	usedCard = "devyatka-kubkov";	
	break;
	case 25:
	url="/taro/kubki/dvoika-kubkov.jpg";
	usedCard = "dvoika-kubkov";	
	break;
	case 26:
	url="/taro/kubki/korol-kubkov.jpg";
	usedCard = "korol-kubkov";	
	break;
	case 27:
	url="/taro/kubki/koroleva-kubkov.jpg";
	usedCard = "koroleva-kubkov";	
	break;
	case 28:
	url="/taro/kubki/pazh-kubkov.jpg";
	usedCard = "pazh-kubkov";	
	break;
	case 29:
	url="/taro/kubki/pyaterka-kubkov.jpg";
	usedCard = "pyaterka-kubkov";	
	break;
	case 30:
	url="/taro/kubki/rycar-kubkov.jpg";
	usedCard = "rycar-kubkov";	
	break;
	case 31:
	url="/taro/kubki/semerka-kubkov.jpg";
	usedCard = "semerka-kubkov";	
	break;
	case 32:
	url="/taro/kubki/shesterka-kubkov.jpg";
	usedCard = "shesterka-kubkov";	
	break;
	case 33:
	url="/taro/kubki/troika-kubkov.jpg";
	usedCard = "troika-kubkov";	
	break;
	case 34:
	url="/taro/kubki/tuz-kubkov.jpg";
	usedCard = "tuz-kubkov";	
	break;
	case 35:
	url="/taro/kubki/vosmerka-kubkov.jpg";
	usedCard = "vosmerka-kubkov";	
	break;
	case 36:
	url="/taro/mechi/chetverka-kubkov.jpg";
	usedCard = "chetverka-mechei";
	break;
	case 37:
	url="/taro/mechi/desyatka-kubkov.jpg";
	usedCard = "desyatka-mechei";
	break;
	case 38:
	url="/taro/mechi/devyatka-kubkov.jpg";
	usedCard = "devyatka-mechei";
	break;
	case 39:
	url="/taro/mechi/dvoika-kubkov.jpg";
	usedCard = "dvoika-mechei";
	break;
	case 40:
	url="/taro/mechi/korol-kubkov.jpg";
	usedCard = "korol-mechei";
	break;
	case 41:
	url="/taro/mechi/koroleva-kubkov.jpg";
	usedCard = "koroleva-mechei";
	break;
	case 42:
	url="/taro/mechi/pazh-kubkov.jpg";
	usedCard = "pazh-mechei";
	break;
	case 43:
	url="/taro/mechi/pyaterka-kubkov.jpg";
	usedCard = "pyaterka-mechei";
	break;
	case 44:
	url="/taro/mechi/rycar-kubkov.jpg";
	usedCard = "rycar-mechei";
	break;
	case 45:
	url="/taro/mechi/semerka-kubkov.jpg";
	usedCard = "semerka-mechei";
	break;
	case 46:
	url="/taro/mechi/shesterka-kubkov.jpg";
	usedCard = "shesterka-mechei";
	break;
	case 47:
	url="/taro/mechi/troika-kubkov.jpg";
	usedCard = "troika-mechei";
	break;
	case 48:
	url="/taro/mechi/tuz-kubkov.jpg";
	usedCard = "tuz-mechei";
	break;
	case 49:
	url="/taro/mechi/vosmerka-kubkov.jpg";
	usedCard = "vosmerka-mechei";
	break;
	case 50:
	url="/taro/pentakli/chetverka-kubkov.jpg";
	usedCard = "chetverka-pentaklei";
	break;
	case 51:
	url="/taro/pentakli/desyatka-kubkov.jpg";
	usedCard = "desyatka-pentaklei";
	break;
	case 52:
	url="/taro/pentakli/devyatka-kubkov.jpg";
	usedCard = "devyatka-pentaklei";
	break;
	case 53:
	url="/taro/pentakli/dvoika-kubkov.jpg";
	usedCard = "dvoika-pentaklei";
	break;
	case 54:
	url="/taro/pentakli/korol-kubkov.jpg";
	usedCard = "korol-pentaklei";
	break;
	case 55:
	url="/taro/pentakli/koroleva-kubkov.jpg";
	usedCard = "koroleva-pentaklei";
	break;
	case 56:
	url="/taro/pentakli/pazh-kubkov.jpg";
	usedCard = "pazh-pentaklei";
	break;
	case 57:
	url="/taro/pentakli/pyaterka-kubkov.jpg";
	usedCard = "pyaterka-pentaklei";
	break;
	case 58:
	url="/taro/pentakli/rycar-kubkov.jpg";
	usedCard = "rycar-pentaklei";
	break;
	case 59:
	url="/taro/pentakli/semerka-kubkov.jpg";
	usedCard = "semerka-pentaklei";
	break;
	case 62:
	url="/taro/pentakli/shesterka-kubkov.jpg";
	usedCard = "shesterka-pentaklei";
	break;
	case 61:
	url="/taro/pentakli/troika-kubkov.jpg";
	usedCard = "troika-pentaklei";
	break;
	case 62:
	url="/taro/pentakli/tuz-kubkov.jpg";
	usedCard = "tuz-pentaklei";
	break;
	case 63:
	url="/taro/pentakli/vosmerka-kubkov.jpg";
	usedCard = "vosmerka-pentaklei";
	break;
	case 64:
	url="/taro/pentakli/chetverka-kubkov.jpg";
	usedCard = "chetverka-pentaklei";
	break;
	case 65:
	url="/taro/pentakli/desyatka-kubkov.jpg";
	usedCard = "desyatka-pentaklei";
	break;
	case 66:
	url="/taro/pentakli/devyatka-kubkov.jpg";
	usedCard = "devyatka-pentaklei";
	break;
	case 67:
	url="/taro/pentakli/dvoika-kubkov.jpg";
	usedCard = "dvoika-pentaklei";
	break;
	case 68:
	url="/taro/pentakli/korol-kubkov.jpg";
	usedCard = "korol-pentaklei";
	break;
	case 69:
	url="/taro/pentakli/koroleva-kubkov.jpg";
	usedCard = "koroleva-pentaklei";
	break;
	case 70:
	url="/taro/pentakli/pazh-kubkov.jpg";
	usedCard = "pazh-pentaklei";
	break;
	case 71:
	url="/taro/pentakli/pyaterka-kubkov.jpg";
	usedCard = "pyaterka-pentaklei";
	break;
	case 72:
	url="/taro/pentakli/rycar-kubkov.jpg";
	usedCard = "rycar-pentaklei";
	break;
	case 73:
	url="/taro/pentakli/semerka-kubkov.jpg";
	usedCard = "semerka-pentaklei";
	break;
	case 74:
	url="/taro/pentakli/shesterka-kubkov.jpg";
	usedCard = "shesterka-pentaklei";
	break;
	case 75:
	url="/taro/pentakli/troika-kubkov.jpg";
	usedCard = "troika-pentaklei";
	break;
	case 76:
	url="/taro/pentakli/tuz-kubkov.jpg";
	usedCard = "tuz-pentaklei";
	break;
	case 77:
	url="/taro/pentakli/vosmerka-kubkov.jpg";
	usedCard = "vosmerka-pentaklei";
	break;
	case 0:
	url="/taro/starcan/otshelnik.jpg";
	usedCard = "otshelnik";
	break;
	}
    console.log('usedCard in getRandomCard: ' + usedCard);
    console.log('url in getRandomCard: ' + url);	
    return usedCard;	
    }

            let cntr = 0;
            var chosenCard="";
            
            function cardsCounter(item){
            console.log(cntr);    
            if(cntr==1){
                let data = {
                usedCardOne: item
                }
                console.log(data);
                tg.sendData(JSON.stringify(data));
                tg.close();
            } else {
                cntr=cntr;}
            }

            

            let card1 = document.getElementById('card1');
            card1.addEventListener('click', () => {
	    console.log(url);
	        
            let digit = getRandomArbitrary(78);
	    console.log("digit : " + digit);	    
            usedCardOne = getRandomCard(digit); 
	    console.log("usedCardOne : " + usedCardOne);
	    console.log('url 1: ' + url);
	    url = "https://rawebmaster.github.io/webapptest.github.io/" + url;
	    console.log('url 2: ' + url);	    
            card1.src=url;
            cntr+=1;
            cardsCounter(usedCardOne);
	    sleep(2000); 	    
            });

            let card2 = document.getElementById('card2');
            card2.addEventListener('click', () => {
            pressed2=1;
            cntr+=1;
            cardsCounter();
            });

            let card3 = document.getElementById('card3');
            card3.addEventListener('click', () => {
            pressed3=1;
            cntr+=1;
            cardsCounter();
            });

            let card4 = document.getElementById('card4');
            card4.addEventListener('click', () => {
            pressed4=1;
            cntr+=1;
            cardsCounter();
            });

            let card5 = document.getElementById('card5');
            card5.addEventListener('click', () => {
            pressed5=1;
            cntr+=1;
            cardsCounter();
            });

            let card6 = document.getElementById('card6');
            card6.addEventListener('click', () => {
            pressed6=1;
            cntr+=1;
            cardsCounter();
            });


        </script>
            </div>
    </main>

    <footer>
    </footer>

   <script src="https://telegram.org/js/telegram-web-app.js"></script>
        </div>
    </div>
</body>
</html>
